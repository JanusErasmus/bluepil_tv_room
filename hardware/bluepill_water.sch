EESchema Schematic File Version 4
LIBS:bluepill_water-cache
EELAYER 26 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 1 2
Title "Bluepill Garage Doors"
Date "2019-08-13"
Rev "324234"
Comp "Janus"
Comment1 "Overview of the UPS"
Comment2 "tw"
Comment3 "3"
Comment4 "4"
$EndDescr
$Sheet
S 2750 2550 1600 1850
U 5C14BAF9
F0 "Bluepill Node" 50
F1 "node.sch" 50
F2 "ADC_CH0" I R 4350 3500 50 
F3 "ADC_CH1" I R 4350 3600 50 
F4 "UART1_RX" I R 4350 2650 50 
F5 "UART1_TX" O R 4350 2750 50 
F6 "PB9" O R 4350 3900 50 
F7 "PB8" O R 4350 4050 50 
$EndSheet
$Comp
L Connector_Generic:Conn_01x02 J1
U 1 1 5C14C190
P 1100 2850
F 0 "J1" H 1020 2525 50  0000 C CNN
F 1 "Conn_01x02" H 1020 2616 50  0000 C CNN
F 2 "SIP2" H 1100 2850 50  0001 C CNN
F 3 "~" H 1100 2850 50  0001 C CNN
	1    1100 2850
	-1   0    0    -1  
$EndComp
$Comp
L power:+5V #PWR0109
U 1 1 5C14C23B
P 2150 2400
F 0 "#PWR0109" H 2150 2250 50  0001 C CNN
F 1 "+5V" H 2165 2573 50  0000 C CNN
F 2 "" H 2150 2400 50  0001 C CNN
F 3 "" H 2150 2400 50  0001 C CNN
	1    2150 2400
	1    0    0    -1  
$EndComp
Wire Wire Line
	2150 2400 2150 2850
$Comp
L power:GNDREF #PWR0110
U 1 1 5C14C26C
P 2150 3600
F 0 "#PWR0110" H 2150 3350 50  0001 C CNN
F 1 "GNDREF" H 2155 3427 50  0001 C CNN
F 2 "" H 2150 3600 50  0001 C CNN
F 3 "" H 2150 3600 50  0001 C CNN
	1    2150 3600
	1    0    0    -1  
$EndComp
Wire Wire Line
	2150 3450 2150 3600
$Comp
L power:PWR_FLAG #FLG0101
U 1 1 5C14C2D0
P 2300 2800
F 0 "#FLG0101" H 2300 2875 50  0001 C CNN
F 1 "PWR_FLAG" H 2300 2974 50  0001 C CNN
F 2 "" H 2300 2800 50  0001 C CNN
F 3 "~" H 2300 2800 50  0001 C CNN
	1    2300 2800
	1    0    0    -1  
$EndComp
Wire Wire Line
	2300 2800 2300 2850
Wire Wire Line
	2300 2850 2150 2850
$Comp
L power:PWR_FLAG #FLG0102
U 1 1 5C14C309
P 2300 3600
F 0 "#FLG0102" H 2300 3675 50  0001 C CNN
F 1 "PWR_FLAG" H 2300 3774 50  0001 C CNN
F 2 "" H 2300 3600 50  0001 C CNN
F 3 "~" H 2300 3600 50  0001 C CNN
	1    2300 3600
	-1   0    0    1   
$EndComp
Wire Wire Line
	2300 3600 2300 3450
Wire Wire Line
	2300 3450 2150 3450
Wire Wire Line
	2150 3450 1300 3450
Connection ~ 2150 3450
Text Label 4900 3500 2    50   ~ 0
EXT_TEMP
$Comp
L Connector_Generic:Conn_01x04 J4
U 1 1 5C177171
P 5350 2550
F 0 "J4" H 5430 2542 50  0000 L CNN
F 1 "Conn_01x04" H 5430 2451 50  0000 L CNN
F 2 "SIP4" H 5350 2550 50  0001 C CNN
F 3 "~" H 5350 2550 50  0001 C CNN
	1    5350 2550
	1    0    0    -1  
$EndComp
Wire Wire Line
	5150 2750 4350 2750
Wire Wire Line
	5150 2650 4350 2650
$Comp
L power:GNDREF #PWR01
U 1 1 5C17ABCC
P 4850 2550
F 0 "#PWR01" H 4850 2300 50  0001 C CNN
F 1 "GNDREF" H 4855 2377 50  0001 C CNN
F 2 "" H 4850 2550 50  0001 C CNN
F 3 "" H 4850 2550 50  0001 C CNN
	1    4850 2550
	0    1    1    0   
$EndComp
$Comp
L power:+3V3 #PWR02
U 1 1 5C182515
P 5000 2250
F 0 "#PWR02" H 5000 2100 50  0001 C CNN
F 1 "+3V3" H 5015 2423 50  0000 C CNN
F 2 "" H 5000 2250 50  0001 C CNN
F 3 "" H 5000 2250 50  0001 C CNN
	1    5000 2250
	1    0    0    -1  
$EndComp
Wire Wire Line
	5000 2250 5000 2450
Wire Wire Line
	5000 2450 5150 2450
Wire Wire Line
	5150 2550 4850 2550
Wire Wire Line
	1300 2950 1300 3450
$Comp
L Device:C C3
U 1 1 5C15D8AF
P 1700 3000
F 0 "C3" H 1815 3046 50  0000 L CNN
F 1 "100uF" H 1815 2955 50  0000 L CNN
F 2 "RA1_3" H 1738 2850 50  0001 C CNN
F 3 "~" H 1700 3000 50  0001 C CNN
	1    1700 3000
	1    0    0    -1  
$EndComp
$Comp
L Device:C C5
U 1 1 5C15D9F4
P 2150 3000
F 0 "C5" H 2265 3046 50  0000 L CNN
F 1 "100nF" H 2265 2955 50  0000 L CNN
F 2 "RA1_2" H 2188 2850 50  0001 C CNN
F 3 "~" H 2150 3000 50  0001 C CNN
	1    2150 3000
	1    0    0    -1  
$EndComp
Connection ~ 2150 2850
Wire Wire Line
	2150 2850 1700 2850
Connection ~ 1700 2850
$Comp
L power:GNDREF #PWR05
U 1 1 5C16250C
P 1700 3200
F 0 "#PWR05" H 1700 2950 50  0001 C CNN
F 1 "GNDREF" H 1705 3027 50  0001 C CNN
F 2 "" H 1700 3200 50  0001 C CNN
F 3 "" H 1700 3200 50  0001 C CNN
	1    1700 3200
	1    0    0    -1  
$EndComp
$Comp
L power:GNDREF #PWR06
U 1 1 5C16254B
P 2150 3200
F 0 "#PWR06" H 2150 2950 50  0001 C CNN
F 1 "GNDREF" H 2155 3027 50  0001 C CNN
F 2 "" H 2150 3200 50  0001 C CNN
F 3 "" H 2150 3200 50  0001 C CNN
	1    2150 3200
	1    0    0    -1  
$EndComp
Wire Wire Line
	2150 3150 2150 3200
Wire Wire Line
	1700 3150 1700 3200
Wire Wire Line
	1300 2850 1700 2850
$Comp
L Device:C C?
U 1 1 5D6F7886
P 7050 3100
F 0 "C?" H 7165 3146 50  0000 L CNN
F 1 "100nF" H 7165 3055 50  0000 L CNN
F 2 "RA1_2" H 7088 2950 50  0001 C CNN
F 3 "~" H 7050 3100 50  0001 C CNN
	1    7050 3100
	1    0    0    -1  
$EndComp
$Comp
L power:GNDREF #PWR?
U 1 1 5D6F788D
P 7050 3300
F 0 "#PWR?" H 7050 3050 50  0001 C CNN
F 1 "GNDREF" H 7055 3127 50  0001 C CNN
F 2 "" H 7050 3300 50  0001 C CNN
F 3 "" H 7050 3300 50  0001 C CNN
	1    7050 3300
	1    0    0    -1  
$EndComp
Wire Wire Line
	7050 3300 7050 3250
Wire Wire Line
	7050 2900 7050 2950
$Comp
L Device:C C?
U 1 1 5D6F7895
P 6550 3100
F 0 "C?" H 6665 3146 50  0000 L CNN
F 1 "10uF" H 6665 3055 50  0000 L CNN
F 2 "RA1_2" H 6588 2950 50  0001 C CNN
F 3 "~" H 6550 3100 50  0001 C CNN
	1    6550 3100
	1    0    0    -1  
$EndComp
$Comp
L power:GNDREF #PWR?
U 1 1 5D6F789C
P 6550 3300
F 0 "#PWR?" H 6550 3050 50  0001 C CNN
F 1 "GNDREF" H 6555 3127 50  0001 C CNN
F 2 "" H 6550 3300 50  0001 C CNN
F 3 "" H 6550 3300 50  0001 C CNN
	1    6550 3300
	1    0    0    -1  
$EndComp
Wire Wire Line
	6550 3250 6550 3300
Wire Wire Line
	6550 2950 6550 2900
$Comp
L Device:D_Temperature_Dependent_ALT D?
U 1 1 5D6F78A4
P 7600 3100
F 0 "D?" V 7554 3179 50  0000 L CNN
F 1 "LM335" V 7645 3179 50  0000 L CNN
F 2 "" H 7600 3100 50  0001 C CNN
F 3 "~" H 7600 3100 50  0001 C CNN
	1    7600 3100
	0    1    1    0   
$EndComp
$Comp
L power:GNDREF #PWR?
U 1 1 5D6F78AB
P 7600 3300
F 0 "#PWR?" H 7600 3050 50  0001 C CNN
F 1 "GNDREF" H 7605 3127 50  0001 C CNN
F 2 "" H 7600 3300 50  0001 C CNN
F 3 "" H 7600 3300 50  0001 C CNN
	1    7600 3300
	1    0    0    -1  
$EndComp
Wire Wire Line
	7600 3250 7600 3300
Wire Wire Line
	6550 2900 7050 2900
Connection ~ 6550 2900
Wire Wire Line
	7050 2900 7600 2900
Wire Wire Line
	7600 2900 7600 2950
Connection ~ 7050 2900
$Comp
L Device:R R?
U 1 1 5D6F78B8
P 7600 2650
F 0 "R?" H 7670 2696 50  0000 L CNN
F 1 "220R" H 7670 2605 50  0000 L CNN
F 2 "" V 7530 2650 50  0001 C CNN
F 3 "~" H 7600 2650 50  0001 C CNN
	1    7600 2650
	1    0    0    -1  
$EndComp
Wire Wire Line
	7600 2800 7600 2900
Connection ~ 7600 2900
$Comp
L power:+3V3 #PWR?
U 1 1 5D6F78C1
P 7600 2400
F 0 "#PWR?" H 7600 2250 50  0001 C CNN
F 1 "+3V3" H 7615 2573 50  0000 C CNN
F 2 "" H 7600 2400 50  0001 C CNN
F 3 "" H 7600 2400 50  0001 C CNN
	1    7600 2400
	1    0    0    -1  
$EndComp
Wire Wire Line
	7600 2400 7600 2500
Wire Wire Line
	5850 2900 5850 3500
Wire Wire Line
	4350 3500 5850 3500
Wire Wire Line
	5850 2900 6550 2900
$Comp
L Transistor_BJT:BC160 Q?
U 1 1 5D6F4DC1
P 7350 4550
F 0 "Q?" H 7541 4504 50  0000 L CNN
F 1 "BC160" H 7541 4595 50  0000 L CNN
F 2 "Package_TO_SOT_THT:TO-39-3" H 7550 4475 50  0001 L CIN
F 3 "http://www.farnell.com/datasheets/1697389.pdf" H 7350 4550 50  0001 L CNN
	1    7350 4550
	1    0    0    1   
$EndComp
$Comp
L Transistor_BJT:BC160 Q?
U 1 1 5D6F4EA3
P 9100 4550
F 0 "Q?" H 9291 4504 50  0000 L CNN
F 1 "BC160" H 9291 4595 50  0000 L CNN
F 2 "Package_TO_SOT_THT:TO-39-3" H 9300 4475 50  0001 L CIN
F 3 "http://www.farnell.com/datasheets/1697389.pdf" H 9100 4550 50  0001 L CNN
	1    9100 4550
	1    0    0    1   
$EndComp
Text Label 10650 5550 0    50   ~ 0
SOLINOID
$Comp
L power:+12V #PWR?
U 1 1 5D6F56A9
P 7450 4250
F 0 "#PWR?" H 7450 4100 50  0001 C CNN
F 1 "+12V" H 7465 4423 50  0000 C CNN
F 2 "" H 7450 4250 50  0001 C CNN
F 3 "" H 7450 4250 50  0001 C CNN
	1    7450 4250
	1    0    0    -1  
$EndComp
$Comp
L power:+12V #PWR?
U 1 1 5D6F56CF
P 9200 4250
F 0 "#PWR?" H 9200 4100 50  0001 C CNN
F 1 "+12V" H 9215 4423 50  0000 C CNN
F 2 "" H 9200 4250 50  0001 C CNN
F 3 "" H 9200 4250 50  0001 C CNN
	1    9200 4250
	1    0    0    -1  
$EndComp
Wire Wire Line
	9200 4250 9200 4350
Wire Wire Line
	7450 4250 7450 4350
$Comp
L Device:R R?
U 1 1 5D6F5E33
P 8800 5050
F 0 "R?" H 8870 5096 50  0000 L CNN
F 1 "240R" H 8870 5005 50  0000 L CNN
F 2 "" V 8730 5050 50  0001 C CNN
F 3 "~" H 8800 5050 50  0001 C CNN
	1    8800 5050
	1    0    0    -1  
$EndComp
$Comp
L Device:R R?
U 1 1 5D6F5E7D
P 9200 5050
F 0 "R?" H 9270 5096 50  0000 L CNN
F 1 "240R" H 9270 5005 50  0000 L CNN
F 2 "" V 9130 5050 50  0001 C CNN
F 3 "~" H 9200 5050 50  0001 C CNN
	1    9200 5050
	1    0    0    -1  
$EndComp
Wire Wire Line
	7450 5550 9200 5550
Wire Wire Line
	9200 5200 9200 5300
Connection ~ 9200 5550
Wire Wire Line
	9200 5550 11050 5550
Wire Wire Line
	9200 4750 9200 4800
$Comp
L Device:R R?
U 1 1 5D6F716E
P 6900 4550
F 0 "R?" V 6800 4500 50  0000 L CNN
F 1 "150R" V 7000 4500 50  0000 L CNN
F 2 "" V 6830 4550 50  0001 C CNN
F 3 "~" H 6900 4550 50  0001 C CNN
	1    6900 4550
	0    1    1    0   
$EndComp
$Comp
L Device:R R?
U 1 1 5D6F72E7
P 8700 4550
F 0 "R?" V 8600 4500 50  0000 L CNN
F 1 "1K" V 8800 4500 50  0000 L CNN
F 2 "" V 8630 4550 50  0001 C CNN
F 3 "~" H 8700 4550 50  0001 C CNN
	1    8700 4550
	0    1    1    0   
$EndComp
Wire Wire Line
	8850 4550 8900 4550
Wire Wire Line
	8450 4550 8450 3900
Wire Wire Line
	8450 3900 4350 3900
Wire Wire Line
	7150 4550 7050 4550
Wire Wire Line
	6750 4550 6350 4550
Wire Wire Line
	6350 4550 6350 4050
Wire Wire Line
	6350 4050 4350 4050
Wire Wire Line
	8450 4550 8550 4550
$Comp
L Device:R R?
U 1 1 5D6FB26F
P 9600 5050
F 0 "R?" H 9670 5096 50  0000 L CNN
F 1 "240R" H 9670 5005 50  0000 L CNN
F 2 "" V 9530 5050 50  0001 C CNN
F 3 "~" H 9600 5050 50  0001 C CNN
	1    9600 5050
	1    0    0    -1  
$EndComp
Wire Wire Line
	7450 4750 7450 5550
Connection ~ 9200 4800
Wire Wire Line
	9200 4800 9200 4900
Wire Wire Line
	9200 4800 9600 4800
Wire Wire Line
	9600 4800 9600 4900
Wire Wire Line
	9600 5200 9600 5300
Wire Wire Line
	9600 5300 9200 5300
Connection ~ 9200 5300
Wire Wire Line
	9200 5300 9200 5550
Wire Wire Line
	8800 5300 9200 5300
Wire Wire Line
	8800 4800 9200 4800
Wire Wire Line
	8800 4800 8800 4900
Wire Wire Line
	8800 5300 8800 5200
Text Notes 9250 5400 0    50   ~ 0
HOLDING
Text Notes 7000 4900 0    50   ~ 0
SWITCHING
Text Label 4850 3900 0    50   ~ 0
WATER_HOLD_OUT
Text Label 4850 4050 0    50   ~ 0
WATER_OUT
$Comp
L power:GNDREF #PWR?
U 1 1 5D7011DF
P 9200 5800
F 0 "#PWR?" H 9200 5550 50  0001 C CNN
F 1 "GNDREF" H 9205 5627 50  0001 C CNN
F 2 "" H 9200 5800 50  0001 C CNN
F 3 "" H 9200 5800 50  0001 C CNN
	1    9200 5800
	1    0    0    -1  
$EndComp
Wire Wire Line
	9200 5800 9200 5700
Wire Wire Line
	9200 5700 11050 5700
$EndSCHEMATC
